
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>RN渲染通信机制 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-toggle-chapters/toggle.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Mnager.html" />
    
    
    <link rel="prev" href="router.html" />
    

    
    
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    项目简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../快速开始.html">
            
                <a href="../快速开始.html">
            
                    
                    快速开始
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../system/环境搭建.html">
            
                <a href="../system/环境搭建.html">
            
                    
                    环境搭建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../system/环境搭建Android.html">
            
                <a href="../system/环境搭建Android.html">
            
                    
                    环境搭建Android
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../system/本地开发.html">
            
                <a href="../system/本地开发.html">
            
                    
                    本地开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../system/平台部署及使用方法使用.html">
            
                <a href="../system/平台部署及使用方法使用.html">
            
                    
                    部署热更新平台
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../system/hotupdatesystem/RN资源管理.html">
            
                <a href="../system/hotupdatesystem/RN资源管理.html">
            
                    
                    RN资源管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../system/hotupdatesystem/RN资源构建.html">
            
                <a href="../system/hotupdatesystem/RN资源构建.html">
            
                    
                    RN资源构建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../system/hotupdatesystem/RN资源同步.html">
            
                <a href="../system/hotupdatesystem/RN资源同步.html">
            
                    
                    RN资源同步
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="../system/hotupdatesystem/RN项目回滚.html">
            
                <a href="../system/hotupdatesystem/RN项目回滚.html">
            
                    
                    RN项目回滚
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="../system/hotupdatesystem/RN真机预览.html">
            
                <a href="../system/hotupdatesystem/RN真机预览.html">
            
                    
                    RN真机预览
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../design.html">
            
                <a href="../design.html">
            
                    
                    RN自定义组件库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../design/radio.html">
            
                <a href="../design/radio.html">
            
                    
                    单选组件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../design/checkbox.html">
            
                <a href="../design/checkbox.html">
            
                    
                    多选选组件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../design/DatePicker.html">
            
                <a href="../design/DatePicker.html">
            
                    
                    时间选择组件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../design/Swiper.html">
            
                <a href="../design/Swiper.html">
            
                    
                    轮播组件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../design/PickerView.html">
            
                <a href="../design/PickerView.html">
            
                    
                    PickerView组件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../app.html">
            
                <a href="../app.html">
            
                    
                    RN交互协议
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../app/jumpToH5.html">
            
                <a href="../app/jumpToH5.html">
            
                    
                    跳转H5页面
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../app/jumpToNative.html">
            
                <a href="../app/jumpToNative.html">
            
                    
                    跳转Native页面
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../app/jumpToRn.html">
            
                <a href="../app/jumpToRn.html">
            
                    
                    跳转RN页面
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../app/toast.html">
            
                <a href="../app/toast.html">
            
                    
                    轻提示toast
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../app/loading.html">
            
                <a href="../app/loading.html">
            
                    
                    页面loading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../app/dialog.html">
            
                <a href="../app/dialog.html">
            
                    
                    对话框dialog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../app/setWebLog.html">
            
                <a href="../app/setWebLog.html">
            
                    
                    埋点协议
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../app/request.html">
            
                <a href="../app/request.html">
            
                    
                    网络请求
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="homePage.html">
            
                <a href="homePage.html">
            
                    
                    RN知识点归纳
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="basis.html">
            
                <a href="basis.html">
            
                    
                    RN入门开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="router.html">
            
                <a href="router.html">
            
                    
                    RN路由
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.3" data-path="protocol.html">
            
                <a href="protocol.html">
            
                    
                    RN渲染通信机制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="Mnager.html">
            
                <a href="Mnager.html">
            
                    
                    RN交互管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="FlatList.html">
            
                <a href="FlatList.html">
            
                    
                    FlatList使用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../feedback/feedback.html">
            
                <a href="../feedback/feedback.html">
            
                    
                    问题反馈
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../feedback/question.html">
            
                <a href="../feedback/question.html">
            
                    
                    RN问题记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >RN渲染通信机制</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#&#x524D;&#x8A00;"><b>1. </b>&#x524D;&#x8A00;</a></li><li><span class="title-icon "></span><a href="#&#x4E00;&#x3001;&#x6574;&#x4F53;&#x6846;&#x67B6;"><b>2. </b>&#x4E00;&#x3001;&#x6574;&#x4F53;&#x6846;&#x67B6;</a></li><li><span class="title-icon "></span><a href="#&#x4E8C;&#x3001;&#x524D;&#x7AEF;&#x9875;&#x9762;&#x5F00;&#x53D1;"><b>3. </b>&#x4E8C;&#x3001;&#x524D;&#x7AEF;&#x9875;&#x9762;&#x5F00;&#x53D1;</a></li><ul><li><span class="title-icon "></span><a href="#1&#x3001;js&#x5165;&#x53E3;"><b>3.1. </b>1&#x3001;js&#x5165;&#x53E3;</a></li><li><span class="title-icon "></span><a href="#2&#x3001;rn-appregistry"><b>3.2. </b>2&#x3001;RN AppRegistry</a></li><li><span class="title-icon "></span><a href="#3&#x3001;reactdomrender"><b>3.3. </b>3&#x3001;ReactDOM.render</a></li><li><span class="title-icon "></span><a href="#4&#x3001;rn&#x7EC4;&#x4EF6;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;"><b>3.4. </b>4&#x3001;RN&#x7EC4;&#x4EF6;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;</a></li></ul><li><span class="title-icon "></span><a href="#&#x4E09;&#x3001;react-native&#x5982;&#x4F55;&#x628A;react&#x8F6C;&#x5316;&#x4E3A;&#x5143;&#x7D20;&#x7684;api"><b>4. </b>&#x4E09;&#x3001;React Native&#x5982;&#x4F55;&#x628A;React&#x8F6C;&#x5316;&#x4E3A;&#x5143;&#x7D20;&#x7684;API</a></li><li><span class="title-icon "></span><a href="#&#x56DB;&#x3001;react-native&#x5982;&#x4F55;&#x5982;&#x4F55;&#x505A;&#x5230;js&#x548C;oc&#x4EA4;&#x4E92;"><b>5. </b>&#x56DB;&#x3001;React Native&#x5982;&#x4F55;&#x5982;&#x4F55;&#x505A;&#x5230;JS&#x548C;OC&#x4EA4;&#x4E92;</a></li><li><span class="title-icon "></span><a href="#&#x4E94;&#x3001;rn&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;ios&#xFF09;"><b>6. </b>&#x4E94;&#x3001;RN&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;iOS&#xFF09;</a></li><ul><li><span class="title-icon "></span><a href="#2&#x3001;&#x521B;&#x5EFA;rctbridge"><b>6.1. </b>2&#x3001;&#x521B;&#x5EFA;RCTBridge</a></li></ul><li><span class="title-icon "></span><a href="#&#x516D;&#x3001;rn-ui&#x63A7;&#x4EF6;&#x6E32;&#x67D3;&#x6D41;&#x7A0B;"><b>7. </b>&#x516D;&#x3001;RN UI&#x63A7;&#x4EF6;&#x6E32;&#x67D3;&#x6D41;&#x7A0B;</a></li><li><span class="title-icon "></span><a href="#&#x4E03;&#x3001;rn&#x901A;&#x4FE1;&#x673A;&#x5236;"><b>8. </b>&#x4E03;&#x3001;RN&#x901A;&#x4FE1;&#x673A;&#x5236;</a></li><ul><li><span class="title-icon "></span><a href="#2&#x3001;rn&#x7AEF;&#x53D1;&#x6D88;&#x606F;&#x5230;ios&#x7684;&#x8FC7;&#x7A0B;"><b>8.1. </b>2&#x3001;RN&#x7AEF;&#x53D1;&#x6D88;&#x606F;&#x5230;iOS&#x7684;&#x8FC7;&#x7A0B;</a></li><li><span class="title-icon "></span><a href="#3&#x3001;native&#x7ED9;rn&#x4E3B;&#x52A8;&#x53D1;&#x9001;&#x4E8B;&#x4EF6;"><b>8.2. </b>3&#x3001;native&#x7ED9;RN&#x4E3B;&#x52A8;&#x53D1;&#x9001;&#x4E8B;&#x4EF6;</a></li></ul></ul></div><a href="#&#x524D;&#x8A00;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="&#x524D;&#x8A00;"><a name="&#x524D;&#x8A00;" class="anchor-navigation-ex-anchor" href="#&#x524D;&#x8A00;"><i class="fa fa-link" aria-hidden="true"></i></a>1. &#x524D;&#x8A00;</h1>
<p>React Native&#x4E0E;&#x4F20;&#x7EDF;&#x7684;HybirdApp&#x6700;&#x5927;&#x533A;&#x522B;&#x5C31;&#x662F;&#x629B;&#x5F00;WebView&#xFF0C;&#x4F7F;&#x7528;JSC+&#x539F;&#x751F;&#x7EC4;&#x4EF6;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#xFF0C;&#x90A3;&#x4E48;&#x6574;&#x4E2A;App&#x542F;&#x52A8;/&#x6E32;&#x67D3;&#x6D41;&#x7A0B;&#x53C8;&#x662F;&#x600E;&#x6837;&#x7684;&#x5462;&#xFF1F;</p>
<h1 id="&#x4E00;&#x3001;&#x6574;&#x4F53;&#x6846;&#x67B6;"><a name="&#x4E00;&#x3001;&#x6574;&#x4F53;&#x6846;&#x67B6;" class="anchor-navigation-ex-anchor" href="#&#x4E00;&#x3001;&#x6574;&#x4F53;&#x6846;&#x67B6;"><i class="fa fa-link" aria-hidden="true"></i></a>2. &#x4E00;&#x3001;&#x6574;&#x4F53;&#x6846;&#x67B6;</h1>
<p>RN &#x8FD9;&#x5957;&#x6846;&#x67B6;&#x8BA9; JS&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x5927;&#x90E8;&#x5206;&#x4F7F;&#x7528;JS&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x8DE8;&#x5E73;&#x53F0;APP&#xFF1B;
<img src="https://img.58cdn.com.cn/escstatic/fecar/pmuse/reactnative/send.png" width="375"></p>
<p>React &#x4E0E; React native &#x7684;&#x539F;&#x7406;&#x662F;&#x76F8;&#x540C;&#x7684;,&#x90FD;&#x662F;&#x7531; javascript &#x5B9E;&#x73B0;&#x7684;&#x865A;&#x62DF;DOM &#x6765;&#x9A71;&#x52A8;&#x754C;&#x9762; View &#x7684;&#x6E32;&#x67D3;,&#x53EA;&#x4E0D;&#x8FC7; React.js &#x9A71;&#x52A8; HTML DOM &#x7684;&#x6E32;&#x67D3;, RN &#x662F;&#x9A71;&#x52A8; ios/android &#x539F;&#x751F;&#x7EC4;&#x4EF6;&#x7684;&#x6E32;&#x67D3;</p>
<h1 id="&#x4E8C;&#x3001;&#x524D;&#x7AEF;&#x9875;&#x9762;&#x5F00;&#x53D1;"><a name="&#x4E8C;&#x3001;&#x524D;&#x7AEF;&#x9875;&#x9762;&#x5F00;&#x53D1;" class="anchor-navigation-ex-anchor" href="#&#x4E8C;&#x3001;&#x524D;&#x7AEF;&#x9875;&#x9762;&#x5F00;&#x53D1;"><i class="fa fa-link" aria-hidden="true"></i></a>3. &#x4E8C;&#x3001;&#x524D;&#x7AEF;&#x9875;&#x9762;&#x5F00;&#x53D1;</h1>
<h2 id="1&#x3001;js&#x5165;&#x53E3;"><a name="1&#x3001;js&#x5165;&#x53E3;" class="anchor-navigation-ex-anchor" href="#1&#x3001;js&#x5165;&#x53E3;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1. 1&#x3001;js&#x5165;&#x53E3;</h2>
<pre><code>import { AppRegistry } from &quot;react-native&quot;;
import App from &quot;./src/index&quot;;

AppRegistry.registerComponent(&quot;Wubacst&quot;, () =&gt; App);
</code></pre><p>&#x628A;&#x5F53;&#x524D;APP&#x7684;&#x5BF9;&#x8C61;&#x6CE8;&#x518C;&#x5230;AppRegistry&#x7EC4;&#x4EF6;&#x4E2D;&#xFF0C; AppRegistry&#x7EC4;&#x4EF6;&#x662F;js module</p>
<h2 id="2&#x3001;rn-appregistry"><a name="2&#x3001;rn-appregistry" class="anchor-navigation-ex-anchor" href="#2&#x3001;rn-appregistry"><i class="fa fa-link" aria-hidden="true"></i></a>3.2. 2&#x3001;RN AppRegistry</h2>
<ul>
<li>AppRegistry &#x662F;&#x8FD0;&#x884C;&#x6240;&#x6709; React Native &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684; JS &#x5165;&#x53E3;&#x70B9;</li>
<li>&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8DDF;&#x7EC4;&#x4EF6;&#x9700;&#x8981;&#x901A;&#x8FC7; AppRegistry.registerComponent &#x6765;&#x6CE8;&#x518C;&#x5B83;&#x4EEC;&#x81EA;&#x8EAB;</li>
<li>&#x7136;&#x540E;&#x672C;&#x5730;&#x7CFB;&#x7EDF;&#x5C31;&#x53EF;&#x4EE5;&#x52A0;&#x8F7D;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5305;&#xFF0C;&#x518D;&#x7136;&#x540E;&#x5F53; AppRegistry.runApplication&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x771F;&#x6B63;&#x7684;&#x8FD0;&#x884C;&#x8BE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E86;</li>
<li>AppRegistry &#x5728; require &#x5E8F;&#x5217;&#x91CC;&#x662F; required&#xFF0C;&#x786E;&#x4FDD;&#x5728;&#x5176;&#x4ED6;&#x6A21;&#x5757;&#x88AB;&#x9700;&#x6C42;&#x4E4B;&#x524D; JS &#x6267;&#x884C;&#x73AF;&#x5883;&#x5DF2;&#x7ECF;&#x88AB; required</li>
</ul>
<h4 id="appregistry&#x5E38;&#x7528;&#x65B9;&#x6CD5;"><a name="appregistry&#x5E38;&#x7528;&#x65B9;&#x6CD5;" class="anchor-navigation-ex-anchor" href="#appregistry&#x5E38;&#x7528;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>AppRegistry&#x5E38;&#x7528;&#x65B9;&#x6CD5;</h4>
<pre><code>//static&#x9759;&#x6001;&#x65B9;&#x6CD5;,&#x7528;&#x6765;&#x6CE8;&#x518C;&#x914D;&#x7F6E;&#x4FE1;&#x606F;
static **registerConfig**(config: Array&lt;AppConfig&gt;) 

//static&#x9759;&#x6001;&#x65B9;&#x6CD5;,&#x6CE8;&#x518C;&#x7EC4;&#x4EF6;
static **registerComponent**(appKey: string, getComponentFunc: Function) 

//static&#x9759;&#x6001;&#x65B9;&#x6CD5;,&#x6CE8;&#x518C;&#x7EBF;&#x7A0B;
static **registerRunnable**(appKey: string, func: Function) 

//static&#x9759;&#x6001;&#x65B9;&#x6CD5;,&#x8FDB;&#x884C;&#x8FD0;&#x884C;&#x5E94;&#x7528; 
static **runApplication**(appKey: string, appParameters: any)
</code></pre><pre><code>runApplication: function runApplication(appKey, appParameters) {
      var msg = &apos;Running application &quot;&apos; + appKey + &apos;&quot; with appParams: &apos; + JSON.stringify(appParameters) + &apos;. &apos; + &apos;__DEV__ === &apos; + String(__DEV__) + &apos;, development-level warning are &apos; + (__DEV__ ? &apos;ON&apos; : &apos;OFF&apos;) + &apos;, performance optimizations are &apos; + (__DEV__ ? &apos;OFF&apos; : &apos;ON&apos;);
      infoLog(msg);
      BugReporting.addSource(&apos;AppRegistry.runApplication&apos; + runCount++, function () {
        return msg;
      });
      invariant(runnables[appKey] &amp;&amp; runnables[appKey].run, &apos;Application &apos; + appKey + &apos; has not been registered.\n\n&apos; + &quot;Hint: This error often happens when you&apos;re running the packager &quot; + &apos;(local dev server) from a wrong folder. For example you have &apos; + &apos;multiple apps and the packager is still running for the app you &apos; + &apos;were working on before.\nIf this is the case, simply kill the old &apos; + &apos;packager instance (e.g. close the packager terminal window) &apos; + &apos;and start the packager in the correct app folder (e.g. cd into app &apos; + &quot;folder and run &apos;npm start&apos;).\n\n&quot; + &apos;This error can also happen due to a require() error during &apos; + &apos;initialization or failure to call AppReg
      istry.registerComponent.\n\n&apos;);
      SceneTracker.setActiveScene({
        name: appKey
      });
      runnables[appKey].run(appParameters);
    }
</code></pre><h2 id="3&#x3001;reactdomrender"><a name="3&#x3001;reactdomrender" class="anchor-navigation-ex-anchor" href="#3&#x3001;reactdomrender"><i class="fa fa-link" aria-hidden="true"></i></a>3.3. 3&#x3001;ReactDOM.render</h2>
<p>ReactDOM.render&#x662F;React&#x7684;&#x6700;&#x57FA;&#x672C;&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x5C06;&#x6A21;&#x677F;&#x8F6C;&#x4E3A;HTML&#x8BED;&#x8A00;&#xFF0C;&#x5E76;&#x63D2;&#x5165;&#x6307;&#x5B9A;&#x7684;DOM&#x8282;&#x70B9;&#x3002;</p>
<blockquote>
<p>ReactDOM.render(template,targetDOM),&#x8BE5;&#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;:</p>
<ul>
<li>&#x7B2C;&#x4E00;&#x4E2A;&#x662F;&#x521B;&#x5EFA;&#x7684;&#x6A21;&#x677F;</li>
<li>&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x63D2;&#x5165;&#x8BE5;&#x6A21;&#x677F;&#x7684;&#x76EE;&#x6807;&#x4F4D;&#x7F6E;</li>
</ul>
</blockquote>
<pre><code>ReactDOM.render(
  &lt;Page /&gt;,
  document.getElementById(&apos;app&apos;)
);
</code></pre><h2 id="4&#x3001;rn&#x7EC4;&#x4EF6;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;"><a name="4&#x3001;rn&#x7EC4;&#x4EF6;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;" class="anchor-navigation-ex-anchor" href="#4&#x3001;rn&#x7EC4;&#x4EF6;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;"><i class="fa fa-link" aria-hidden="true"></i></a>3.4. 4&#x3001;RN&#x7EC4;&#x4EF6;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;</h2>
<p>&#x50CF; Android&#x548C;iOS &#x5F00;&#x53D1;&#x4E00;&#x6837;&#xFF0C;React Native&#xFF08;RN&#xFF09; &#x4E2D;&#x7684;&#x7EC4;&#x4EF6;&#x4E5F;&#x6709;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF08;Lifecycle&#xFF09;&#xFF1B;<br>&#x5F53;&#x5E94;&#x7528;&#x542F;&#x52A8;&#xFF0C;React Native&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7EF4;&#x62A4;&#x7740;&#x4E00;&#x4E2A;&#x865A;&#x62DF;DOM&#xFF0C;&#x7EC4;&#x4EF6;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x5C31;&#x662F;&#x6307;&#x7EC4;&#x4EF6;&#x521D;&#x59CB;&#x5316;&#x5E76;&#x6302;&#x8F7D;&#x5230;&#x865A;&#x62DF;DOM&#x4E3A;&#x8D77;&#x59CB;&#xFF0C;&#x5230;&#x7EC4;&#x4EF6;&#x4ECE;&#x865A;&#x62DF;DOM&#x5378;&#x8F7D;&#x4E3A;&#x7EC8;&#x7ED3;&#x3002;&#x751F;&#x547D;&#x5468;&#x671F;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x7EC4;&#x4EF6;&#x5728;&#x865A;&#x62DF;DOM&#x4E2D;&#x4E0D;&#x540C;&#x72B6;&#x6001;&#x7684;&#x63CF;&#x8FF0;&#x3002;
<img src="http://upload-images.jianshu.io/upload_images/1417629-4ee80c3ad65de2a3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image">
&#x7EC4;&#x4EF6;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x5206;&#x4E3A;&#x4E09;&#x4E2A;&#x9636;&#x6BB5;&#xFF1A;</p>
<ul>
<li>&#x6302;&#x8F7D;&#xFF08;mounting</li>
<li>&#x66F4;&#x65B0;&#xFF08;updating&#xFF09;</li>
<li>&#x5378;&#x8F7D;&#xFF08;Unmounting</li>
</ul>
<h4 id="&#x7EC4;&#x4EF6;&#x6302;&#x8F7D;"><a name="&#x7EC4;&#x4EF6;&#x6302;&#x8F7D;" class="anchor-navigation-ex-anchor" href="#&#x7EC4;&#x4EF6;&#x6302;&#x8F7D;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7EC4;&#x4EF6;&#x6302;&#x8F7D;</h4>
<p>&#x6302;&#x8F7D;&#x6307;&#x7684;&#x662F;&#x7EC4;&#x4EF6;&#x7684;&#x5B9E;&#x4F8B;&#x88AB;&#x521B;&#x5EFA;&#x5E76;&#x63D2;&#x5165;&#x5230;DOM&#x4E2D;&#xFF0C;&#x6302;&#x8F7D;&#x4F1A;&#x8C03;&#x7528;&#x5982;&#x4E0B;&#x65B9;&#x6CD5;&#x3002;
&#x6302;&#x8F7D;&#x9636;&#x6BB5;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;</p>
<pre><code>constructor(props) {
  super(props);
  this.state = {
    text: &apos;&#x6784;&#x9020;&#x65B9;&#x6CD5;&apos;
  };
}
</code></pre><p>constructor&#x662F;RN&#x7EC4;&#x4EF6;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x5728;RN&#x7EC4;&#x4EF6;&#x88AB;&#x52A0;&#x8F7D;&#x524D;&#x5148;&#x88AB;&#x8C03;&#x7528;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x7684;&#x7EC4;&#x4EF6;&#x7EE7;&#x627F;&#x81EA;React.Component&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x6700;&#x5148;&#x8C03;&#x7528;super(props)&#x3002;&#x5982;&#x679C;&#x4E0D;&#x9700;&#x8981;&#x521D;&#x59CB;&#x5316;state&#xFF0C;&#x5219;&#x4E0D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code>componentWillMount()
</code></pre><p>componentWillMount&#x65B9;&#x6CD5;&#x5728;&#x6302;&#x8F7D;&#x524D;&#x88AB;&#x7ACB;&#x5373;&#x8C03;&#x7528;&#x3002;&#x5B83;&#x5728;render&#x65B9;&#x6CD5;&#x524D;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5728;componentWillMount&#x65B9;&#x6CD5;&#x4E2D;&#x8BBE;&#x7F6E;state&#x5E76;&#x4E0D;&#x4F1A;&#x5BFC;&#x81F4;&#x91CD;&#x65B0;&#x88AB;&#x6E32;&#x67D3;&#x3002;&#x5B83;&#x53EA;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#x4E00;&#x6B21;</p>
<pre><code>render()
</code></pre><p>&#x6E32;&#x67D3;&#xFF0C;render&#x65B9;&#x6CD5;&#x4E2D;&#x4E0D;&#x5E94;&#x8BE5;&#x4FEE;&#x6539;&#x7EC4;&#x4EF6;&#x7684;props&#x548C;state&#xFF1B;render&#x65B9;&#x6CD5;&#x5728;&#x66F4;&#x65B0;&#x9636;&#x6BB5;&#x4E5F;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x524D;&#x63D0;&#x662F;shouldComponentUpdate&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;true&#x3002;</p>
<pre><code>componentDidMount()
</code></pre><p>componentDidMount&#x65B9;&#x6CD5;&#x5728;&#x7EC4;&#x4EF6;&#x88AB;&#x6302;&#x8F7D;&#x540E;&#x7ACB;&#x5373;&#x8C03;&#x7528;&#xFF0C;&#x5728;render&#x65B9;&#x6CD5;&#x540E;&#x88AB;&#x6267;&#x884C;  </p>
<p>&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x83B7;&#x53D6;&#x5176;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x6216;&#x8005;&#x5B50;&#x7EC4;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5B50;&#x7EC4;&#x4EF6;&#x7684;componentDidMount&#x65B9;&#x6CD5;&#x4F1A;&#x5728;&#x7236;&#x7EC4;&#x4EF6;&#x7684;componentDidMount&#x65B9;&#x6CD5;&#x4E4B;&#x524D;&#x8C03;&#x7528;</p>
<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x4ECE;&#x7F51;&#x7EDC;&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x663E;&#x793A;&#x5230;&#x754C;&#x9762;&#x4E0A;&#xFF0C;&#x6700;&#x597D;&#x5728;&#x8FD9;&#x91CC;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3002;&#x5728;componentDidMount&#x65B9;&#x6CD5;&#x4E2D;&#x8BBE;&#x7F6E;state&#x5C06;&#x4F1A;&#x88AB;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x3002;</p>
<h4 id="&#x7EC4;&#x4EF6;&#x66F4;&#x65B0;"><a name="&#x7EC4;&#x4EF6;&#x66F4;&#x65B0;" class="anchor-navigation-ex-anchor" href="#&#x7EC4;&#x4EF6;&#x66F4;&#x65B0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7EC4;&#x4EF6;&#x66F4;&#x65B0;</h4>
<p>&#x6539;&#x53D8;props&#x6216;&#x8005;state&#x65F6;&#x53EF;&#x4EE5;&#x5BFC;&#x81F4;&#x66F4;&#x65B0;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x88AB;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x65F6;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;&#x5982;&#x4E0B;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code>componentWillReceiveProps(nextProps)
</code></pre><p>componentWillReceiveProps&#x65B9;&#x6CD5;&#x4F1A;&#x5728;&#x6302;&#x8F7D;&#x7684;&#x7EC4;&#x4EF6;&#x63A5;&#x6536;&#x5230;&#x65B0;&#x7684;props&#x65F6;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x5B83;&#x63A5;&#x6536;&#x4E00;&#x4E2A;Object&#x7C7B;&#x578B;&#x53C2;&#x6570;nextProps&#xFF0C;&#x8868;&#x793A;&#x65B0;&#x7684;props&#x3002;&#x901A;&#x5E38;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x63A5;&#x6536;&#x65B0;&#x7684;props&#x503C;&#xFF0C;&#x5E76;&#x6839;&#x636E;props&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x901A;&#x8FC7;&#x8C03;&#x7528; this.setState() &#x6765;&#x66F4;&#x65B0;&#x7EC4;&#x4EF6;state&#xFF0C;this.setState()&#x4E0D;&#x4F1A;&#x89E6;&#x53D1; render&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x5728;&#x6302;&#x8F7D;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x521D;&#x59CB;&#x7684;props&#x5E76;&#x4E0D;&#x4F1A;&#x89E6;&#x53D1;&#x8C03;&#x7528;componentWillReceiveProps&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x53EA;&#x4F1A;&#x5728;&#x7EC4;&#x4EF6;&#x4E2D;&#x7684;props&#x66F4;&#x65B0;&#x65F6;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x53E6;&#x5916;&#xFF0C;&#x8C03;&#x7528;this.setState()&#x4E5F;&#x4E0D;&#x4F1A;&#x89E6;&#x53D1;&#x8C03;&#x7528;componentWillReceiveProps&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code>shouldComponentUpdate(nextProps, nextState)
</code></pre><p>&#x5F53;&#x7EC4;&#x4EF6;&#x63A5;&#x6536;&#x5230;&#x65B0;&#x7684;props&#x548C;state&#x65F6;&#xFF0C;shouldComponentUpdate&#x65B9;&#x6CD5;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x5B83;&#x63A5;&#x6536;&#x4E24;&#x4E2A;Object&#x53C2;&#x6570;&#xFF0C;nextProps&#x662F;&#x65B0;&#x7684;props&#xFF0C;nextState&#x662F;&#x65B0;&#x7684;state&#x3002;   </p>
<p>shouldComponentUpdate&#x65B9;&#x6CD5;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;true&#xFF0C;&#x7528;&#x6765;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x7EC4;&#x4EF6;&#x80FD;&#x591F;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x3002;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x91CD;&#x8F7D;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x8FC7;&#x68C0;&#x67E5;&#x53D8;&#x5316;&#x524D;&#x540E;props&#x548C;state&#xFF0C;&#x6765;&#x51B3;&#x5B9A;&#x7EC4;&#x4EF6;&#x662F;&#x5426;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x3002;&#x5982;&#x679C;&#x8FD4;&#x56DE;false&#xFF0C;&#x5219;&#x7EC4;&#x4EF6;&#x4E0D;&#x4F1A;&#x88AB;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x8C03;&#x7528;&#x672C;&#x65B9;&#x6CD5;&#x540E;&#x9762;&#x7684;componentWillUpdate&#x548C;componentDidUpdate&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code>componentWillUpdate(nextProps, nextState)
</code></pre><p>&#x5982;&#x679C;&#x7EC4;&#x4EF6;props&#x6216;&#x8005;state&#x6539;&#x53D8;&#xFF0C;&#x5E76;&#x4E14;&#x6B64;&#x524D;&#x7684;shouldComponentUpdate&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x4E3A; true&#xFF0C;&#x5219;&#x4F1A;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x3002;componentWillUpdate&#x65B9;&#x6CD5;&#x4F1A;&#x5728;&#x7EC4;&#x4EF6;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x524D;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x4E3A;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x505A;&#x4E00;&#x4E9B;&#x51C6;&#x5907;&#x5DE5;&#x4F5C;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x4E0D;&#x80FD;&#x4F7F;&#x7528; this.setState &#x6765;&#x66F4;&#x6539;state&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x8981;&#x6839;&#x636E;props&#x6765;&#x66F4;&#x6539;state&#xFF0C;&#x9700;&#x8981;&#x5728;componentWillReceiveProps&#x65B9;&#x6CD5;&#x4E2D;&#x53BB;&#x5B9E;&#x73B0;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5728;&#x8FD9;&#x91CC;</p>
<pre><code>componentDidUpdate(prevProps, prevState)
</code></pre><p>&#x7EC4;&#x4EF6;&#x91CD;&#x65B0;&#x6E32;&#x67D3;&#x5B8C;&#x6210;&#x540E;&#x4F1A;&#x8C03;&#x7528;componentDidUpdate&#x65B9;&#x6CD5;&#x3002;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x5206;&#x522B;&#x662F;&#x6E32;&#x67D3;&#x524D;&#x7684;props&#x548C;&#x6E32;&#x67D3;&#x524D;&#x7684;state&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E5F;&#x9002;&#x5408;&#x5199;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x6BD4;&#x5982;&#x53EF;&#x4EE5;&#x5C06;&#x5F53;&#x524D;&#x7684;props&#x548C;prevProps&#x8FDB;&#x884C;&#x5BF9;&#x6BD4;&#xFF0C;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x5219;&#x8BF7;&#x6C42;&#x7F51;&#x7EDC;&#x3002;</p>
<h4 id="&#x7EC4;&#x4EF6;&#x5378;&#x8F7D;"><a name="&#x7EC4;&#x4EF6;&#x5378;&#x8F7D;" class="anchor-navigation-ex-anchor" href="#&#x7EC4;&#x4EF6;&#x5378;&#x8F7D;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7EC4;&#x4EF6;&#x5378;&#x8F7D;</h4>
<p>&#x5378;&#x8F7D;&#x5C31;&#x662F;&#x4ECE;DOM&#x4E2D;&#x5220;&#x9664;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;&#x5982;&#x4E0B;&#x65B9;&#x6CD5;</p>
<pre><code>componentWillUnmount()
</code></pre><p>componentWillUnmount&#x65B9;&#x6CD5;&#x5728;&#x7EC4;&#x4EF6;&#x5378;&#x8F7D;&#x548C;&#x9500;&#x6BC1;&#x4E4B;&#x524D;&#x88AB;&#x7ACB;&#x5373;&#x8C03;&#x7528;&#x3002;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x6267;&#x884C;&#x5FC5;&#x8981;&#x7684;&#x6E05;&#x7406;&#x5DE5;&#x4F5C;&#xFF0C;&#x6BD4;&#x5982;&#xFF0C;&#x5173;&#x6389;&#x8BA1;&#x65F6;&#x5668;&#x3001;&#x53D6;&#x6D88;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x3001;&#x6E05;&#x9664;&#x7EC4;&#x4EF6;&#x88C5;&#x8F7D;&#x4E2D;&#x521B;&#x5EFA;&#x7684;DOM&#x5143;&#x7D20;&#x7B49;&#x7B49;&#x3002;</p>
<h1 id="&#x4E09;&#x3001;react-native&#x5982;&#x4F55;&#x628A;react&#x8F6C;&#x5316;&#x4E3A;&#x5143;&#x7D20;&#x7684;api"><a name="&#x4E09;&#x3001;react-native&#x5982;&#x4F55;&#x628A;react&#x8F6C;&#x5316;&#x4E3A;&#x5143;&#x7D20;&#x7684;api" class="anchor-navigation-ex-anchor" href="#&#x4E09;&#x3001;react-native&#x5982;&#x4F55;&#x628A;react&#x8F6C;&#x5316;&#x4E3A;&#x5143;&#x7D20;&#x7684;api"><i class="fa fa-link" aria-hidden="true"></i></a>4. &#x4E09;&#x3001;React Native&#x5982;&#x4F55;&#x628A;React&#x8F6C;&#x5316;&#x4E3A;&#x5143;&#x7D20;&#x7684;API</h1>
<blockquote>
<p>React Native&#x4F1A;&#x5728;&#x4E00;&#x5F00;&#x59CB;&#x751F;&#x6210;OC&#x6A21;&#x5757;&#x8868;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x8868;&#x4F20;&#x5165;JS&#x4E2D;&#xFF0C;JS&#x53C2;&#x7167;&#x6A21;&#x5757;&#x8868;&#xFF0C;&#x5C31;&#x80FD;&#x95F4;&#x63A5;&#x8C03;&#x7528;OC&#x7684;&#x4EE3;&#x7801;&#x3002;</p>
</blockquote>
<p> &#x76F8;&#x5F53;&#x4E8E;&#x4E70;&#x4E86;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x4EBA;&#xFF08;OC&#xFF09;&#xFF0C;&#x5BF9;&#x5E94;&#x4E00;&#x4EFD;&#x8BF4;&#x660E;&#x4E66;&#xFF08;&#x6A21;&#x5757;&#x8868;&#xFF09;&#xFF0C;&#x7528;&#x6237;&#xFF08;JS&#xFF09;&#x53C2;&#x7167;&#x8BF4;&#x660E;&#x4E66;&#x53BB;&#x6267;&#x884C;&#x673A;&#x5668;&#x4EBA;&#x7684;&#x64CD;&#x4F5C;</p>
<h1 id="&#x56DB;&#x3001;react-native&#x5982;&#x4F55;&#x5982;&#x4F55;&#x505A;&#x5230;js&#x548C;oc&#x4EA4;&#x4E92;"><a name="&#x56DB;&#x3001;react-native&#x5982;&#x4F55;&#x5982;&#x4F55;&#x505A;&#x5230;js&#x548C;oc&#x4EA4;&#x4E92;" class="anchor-navigation-ex-anchor" href="#&#x56DB;&#x3001;react-native&#x5982;&#x4F55;&#x5982;&#x4F55;&#x505A;&#x5230;js&#x548C;oc&#x4EA4;&#x4E92;"><i class="fa fa-link" aria-hidden="true"></i></a>5. &#x56DB;&#x3001;React Native&#x5982;&#x4F55;&#x5982;&#x4F55;&#x505A;&#x5230;JS&#x548C;OC&#x4EA4;&#x4E92;</h1>
<blockquote>
<p>iOS&#x539F;&#x751F;API&#x6709;&#x4E2A;<a href="https://www.jianshu.com/p/bd7dfd8c9917" target="_blank">JavaScriptCore</a>&#x6846;&#x67B6;&#xFF0C;&#x901A;&#x8FC7;&#x5B83;&#x5C31;&#x80FD;&#x5B9E;&#x73B0;JS&#x548C;OC&#x4EA4;&#x4E92;</p>
</blockquote>
<ol>
<li>&#x9996;&#x5148;&#x5199;&#x597D;&#x524D;&#x7AEF;jsx&#x4EE3;&#x7801;</li>
<li>&#x628A;jsx&#x4EE3;&#x7801;&#x89E3;&#x6790;&#x6210;JavaScript&#x4EE3;&#x7801;</li>
<li>OC&#x8BFB;&#x53D6;JS&#x6587;&#x4EF6;</li>
<li>&#x628A;JavaScript&#x8BFB;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x5229;&#x7528;JavaScriptCore&#x6267;&#x884C;</li>
<li>javaScript&#x4EE3;&#x7801;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x6570;&#x7EC4;&#x4E2D;&#x4F1A;&#x63CF;&#x8FF0;OC&#x5BF9;&#x8C61;&#xFF0C;OC&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;&#xFF0C;OC&#x5BF9;&#x8C61;&#x6240;&#x9700;&#x8981;&#x6267;&#x884C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x8BA9;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x8BBE;&#x7F6E;&#x5C5E;&#x6027;&#xFF0C;&#x5E76;&#x4E14;&#x8C03;&#x7528;&#x65B9;&#x6CD5;</li>
</ol>
<p><img src="http://cc.cocimg.com/api/uploads/20170505/1493948661418415.png" alt="image"></p>
<h1 id="&#x4E94;&#x3001;rn&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;ios&#xFF09;"><a name="&#x4E94;&#x3001;rn&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;ios&#xFF09;" class="anchor-navigation-ex-anchor" href="#&#x4E94;&#x3001;rn&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;ios&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>6. &#x4E94;&#x3001;RN&#x542F;&#x52A8;&#x6D41;&#x7A0B;&#xFF08;iOS&#xFF09;</h1>
<p>&#x6D41;&#x7A0B;&#x56FE;&#xFF1A;
<img src="http://cc.cocimg.com/api/uploads/20170505/1493948699270531.png" alt="image"></p>
<h4 id="1&#x3001;&#x521B;&#x5EFA;rctrootview"><a name="1&#x3001;&#x521B;&#x5EFA;rctrootview" class="anchor-navigation-ex-anchor" href="#1&#x3001;&#x521B;&#x5EFA;rctrootview"><i class="fa fa-link" aria-hidden="true"></i></a>1&#x3001;&#x521B;&#x5EFA;RCTRootView</h4>
<blockquote>
<p>&#x8BBE;&#x7F6E;&#x7A97;&#x53E3;&#x6839;&#x63A7;&#x5236;&#x5668;&#x7684;View,&#x628A;RN&#x7684;View&#x6DFB;&#x52A0;&#x5230;&#x7A97;&#x53E3;&#x4E0A;&#x663E;&#x793A; </p>
</blockquote>
<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;RCTRootView&#x5C06;React Natvie&#x89C6;&#x56FE;&#x5C01;&#x88C5;&#x5230;&#x539F;&#x751F;&#x7EC4;&#x4EF6;&#x4E2D;&#x3002;RCTRootView&#x662F;&#x4E00;&#x4E2A;UIView&#x5BB9;&#x5668;&#xFF0C;&#x627F;&#x8F7D;&#x7740;React Native&#x5E94;&#x7528;&#x3002;&#x540C;&#x65F6;&#x5B83;&#x4E5F;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x8054;&#x901A;&#x539F;&#x751F;&#x7AEF;&#x548C;&#x88AB;&#x6258;&#x7BA1;&#x7AEF;&#x7684;&#x63A5;&#x53E3;</p>
<pre><code>RCTRootView *rootView = [[RCTRootView alloc] initWithBridge:bridge
                                      moduleName:@&quot;Wubacst&quot;
                                     initialProperties:props];
</code></pre><pre><code>import { AppRegistry } from &quot;react-native&quot;;
import App from &quot;./src/index&quot;;

AppRegistry.registerComponent(&quot;Wubacst&quot;, () =&gt; App);
</code></pre><h2 id="2&#x3001;&#x521B;&#x5EFA;rctbridge"><a name="2&#x3001;&#x521B;&#x5EFA;rctbridge" class="anchor-navigation-ex-anchor" href="#2&#x3001;&#x521B;&#x5EFA;rctbridge"><i class="fa fa-link" aria-hidden="true"></i></a>6.1. 2&#x3001;&#x521B;&#x5EFA;RCTBridge</h2>
<blockquote>
<p>&#x6865;&#x63A5;&#x5BF9;&#x8C61;,&#x7BA1;&#x7406;JS&#x548C;OC&#x4EA4;&#x4E92;&#xFF0C;&#x505A;&#x4E2D;&#x8F6C;&#x5DE6;&#x53F3;</p>
</blockquote>
<p>1&#x3001;RCTBridgeModule<br>&#x5728;React Native&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x539F;&#x751F;&#x6A21;&#x5757;&#xFF0C;&#x9700;&#x8981;&#x5B9E;&#x73B0;RCTBridgeModule&#x201D;&#x534F;&#x8BAE;</p>
<p>2&#x3001;RCT_EXPORT_MODULE()<br>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;RCTBridgeModule&#x534F;&#x8BAE;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x7C7B;&#x9700;&#x8981;&#x5305;&#x542B;RCT_EXPORT_MODULE()&#x5B8F;&#x3002;&#x8FD9;&#x4E2A;&#x5B8F;&#x4E5F;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x7528;&#x6765;&#x6307;&#x5B9A;&#x5728;Javascript&#x4E2D;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x7684;&#x540D;&#x5B57;&#x3002;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x6307;&#x5B9A;&#xFF0C;&#x9ED8;&#x8BA4;&#x5C31;&#x4F1A;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;Objective-C&#x7C7B;&#x7684;&#x540D;&#x5B57;</p>
<p>3&#x3001;RCT_EXPORT_METHOD()<br>&#x4E0E;&#x6B64;&#x540C;&#x65F6;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x58F0;&#x660E;RCT_EXPORT_METHOD()&#x5B8F;&#x6765;&#x5B9E;&#x73B0;&#x8981;&#x7ED9;Javascript&#x5BFC;&#x51FA;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5426;&#x5219;React Native&#x4E0D;&#x4F1A;&#x5BFC;&#x51FA;&#x4EFB;&#x4F55;&#x65B9;&#x6CD5;&#x3002;</p>
<p>native&#x65B9;&#x6CD5;&#x6CE8;&#x518C;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre><code>@implementation LoadPageManager
RCT_EXPORT_MODULE()

// RN&#x8DF3;&#x8F6C;Native //
RCT_EXPORT_METHOD(showCSTNativePage:(NSDictionary*)commonParames
                  disappearCallBack:(RCTResponseSenderBlock) disappearCallBack)
{
    NSLog(@&quot;start load&quot;);
    NSString* pagePath = [commonParames objectForKey:@&quot;pagePath&quot;];
    NSDictionary* aParams = [commonParames objectForKey:@&quot;params&quot;];
    NSString* aPostMessageEvent = [commonParames objectForKey:@&quot;postMessageEvent&quot;];
    NSInteger isCloseParent = [(NSNumber*)[commonParames objectForKey:@&quot;isDestoryBeforePage&quot;] intValue];
    NSString* aAppearEvent = [commonParames objectForKey:@&quot;appearEvent&quot;];

    NSMutableDictionary* aTmpDic = [NSMutableDictionary dictionaryWithDictionary:commonParames];
    // &#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x4E0D;&#x8981;&#x5220;&#x9664; //
    NSMutableDictionary* aDic;
    if (aParams){
        aDic = [NSMutableDictionary dictionaryWithDictionary:aParams];
    }

    if (aPostMessageEvent){
        [aDic setValue:aPostMessageEvent forKey:PostEvent];
    }

    if (aAppearEvent){
        [aDic setValue:aAppearEvent forKey:AppearEvent];
    }
    // &#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x4E0D;&#x8981;&#x5220;&#x9664; //

    if (disappearCallBack){
        [aTmpDic setValue:disappearCallBack forKey:DisappearCallBack];
    }


    if (isCloseParent){
        [self RNBackAction];
    }
    // &#x8F6C;&#x4E00;&#x4E0B;&#x5B50;&#x4E3A;&#x4E86;&#x548C;&#x4E4B;&#x524D;Hybrid &#x4E00;&#x81F4; //
    pagePath = [pagePath stringByReplacingOccurrencesOfString:@&quot;_&quot; withString:@&quot;/&quot;];
    aDic = [self adpatToHybridParmers:[NSMutableDictionary dictionaryWithDictionary:aTmpDic]]; // &#x540E;&#x671F;&#x91CD;&#x505A;&#x8003;&#x8651;&#x53BB;&#x6389; //
    // &#x8F6C;&#x4E00;&#x4E0B;&#x5B50;&#x4E3A;&#x4E86;&#x548C;&#x4E4B;&#x524D;Hybrid &#x4E00;&#x81F4; //

    dispatch_async(dispatch_get_main_queue(), ^{
       [[CHRDispatcher sharedDispatcher] invokeForPath:pagePath andParams: aDic];
    });
}
</code></pre><p>js&#x8C03;&#x7528;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre><code>import { NativeModules, Platform } from &quot;react-native&quot;;
import checker from &quot;../lib/checker&quot;;
let pageManager = NativeModules.LoadPageManager;
function nativeBridge(type, params, disappearCallBack) {
    pageManager[type](params, disappearCallBack);
}
//RN&#x8DF3;&#x8F6C;native&#x9875;&#x9762;
function jumpNativePage(
    { pagePath, isDestoryBeforePage = 0, jumpParameter, appearEvent, postMessageEvent, ...other },
    disappearCallBack = (error, nativeData) =&gt; {} //&#x56DE;&#x8C03;&#x51FD;&#x6570;
) {
    const error = checker(
        arguments,
        [
            {
                pagePath: &quot;s|r&quot;,
                isDestoryBeforePage: &quot;b&quot;,
                jumpParameter: &quot;o&quot;,
                appearEvent: &quot;s&quot;,
                postMessageEvent: &quot;s&quot;,
                ...other
            },
            &quot;f&quot;
        ],
        &quot;jumpNativePage&quot;
    );
    // &#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x62A5;&#x9519;&#x4E0D;&#x8C03;&#x8D77; Native &#x7684; API
    if (error === &quot;error&quot;) {
        return error;
    }
    let param = {
        pagePath,
        jumpParameter,
        appearEvent,
        postMessageEvent, //&#x4E8B;&#x4EF6;&#x540D;&#x79F0;
        isDestoryBeforePage, //0:&#x4E0D;&#x5173;&#x95ED;&#xFF0C;1&#x5173;&#x95ED;
        ...other
    };
    nativeBridge(&quot;showCSTNativePage&quot;, param, disappearCallBack);
}
</code></pre><p>3&#x3001;&#x521B;&#x5EFA;RCTBatchedBridge</p>
<blockquote>
<p>&#x6279;&#x91CF;&#x6865;&#x63A5;&#x5BF9;&#x8C61;&#xFF0C;JS&#x548C;OC&#x4EA4;&#x4E92;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x90FD;&#x5728;&#x8FD9;&#x4E2A;&#x7C7B;&#x4E2D;</p>
</blockquote>
<p>4&#x3001;&#x6267;&#x884C;[RCTBatchedBridge loadSource]</p>
<blockquote>
<p>&#x52A0;&#x8F7D;JS&#x6E90;&#x7801;</p>
</blockquote>
<p>5&#x3001;&#x6267;&#x884C;[RCTBatchedBridge initModulesWithDispatchGroup</p>
<blockquote>
<p>&#x521B;&#x5EFA;OC&#x6A21;&#x5757;&#x8868;</p>
</blockquote>
<p>6&#x3001;&#x6267;&#x884C;[RCTJSCExecutor injectJSONText]</p>
<blockquote>
<p>&#x5F80;JS&#x4E2D;&#x63D2;&#x5165;OC&#x6A21;&#x5757;&#x8868;</p>
</blockquote>
<p>7&#x3001;&#x6267;&#x884C;&#x5B8C;JS&#x4EE3;&#x7801;&#xFF0C;&#x56DE;&#x8C03;OC&#xFF0C;&#x8C03;&#x7528;OC&#x4E2D;&#x7684;&#x7EC4;&#x4EF6;</p>
<p>8&#x3001;&#x5B8C;&#x6210;UI&#x6E32;&#x67D3;</p>
<h1 id="&#x516D;&#x3001;rn-ui&#x63A7;&#x4EF6;&#x6E32;&#x67D3;&#x6D41;&#x7A0B;"><a name="&#x516D;&#x3001;rn-ui&#x63A7;&#x4EF6;&#x6E32;&#x67D3;&#x6D41;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#&#x516D;&#x3001;rn-ui&#x63A7;&#x4EF6;&#x6E32;&#x67D3;&#x6D41;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>7. &#x516D;&#x3001;RN UI&#x63A7;&#x4EF6;&#x6E32;&#x67D3;&#x6D41;&#x7A0B;</h1>
<p>1&#x3001;RCTRootView runApplication:bridge</p>
<blockquote>
<p>&#x901A;&#x77E5;JS&#x8FD0;&#x884C;App</p>
</blockquote>
<p>2&#x3001;RCTBatchedBridge _processResponse:json error:error</p>
<blockquote>
<p>&#x5904;&#x7406;&#x6267;&#x884C;&#x5B8C;JS&#x4EE3;&#x7801;(runApplication)&#x8FD4;&#x56DE;&#x7684;&#x76F8;&#x5E94;&#xFF0C;&#x5305;&#x542B;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x591A;&#x5C11;&#x5B50;&#x63A7;&#x4EF6;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>
</blockquote>
<p>3&#x3001;RCTBatchedBridge batchDidComplete</p>
<blockquote>
<p>RCTUIManager&#x8C03;&#x7528;&#x5904;&#x7406;&#x5B8C;&#x6210;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x4F1A;&#x5F00;&#x59CB;&#x53BB;&#x52A0;&#x8F7D;rootView&#x7684;&#x5B50;&#x63A7;&#x4EF6;&#x3002;</p>
</blockquote>
<p>4&#x3001;RCTUIManager createView:viewName:rootTag:props</p>
<blockquote>
<p>&#x901A;&#x8FC7;JS&#x6267;&#x884C;OC&#x4EE3;&#x7801;&#xFF0C;&#x8BA9;UI&#x7BA1;&#x7406;&#x8005;&#x521B;&#x5EFA;&#x5B50;&#x63A7;&#x4EF6;View  </p>
</blockquote>
<p>&#x901A;&#x8FC7;RCT_EXPORT_METHOD&#x5B8F;&#x5B9A;&#x4E49;createView&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;</p>
<pre><code>RCT_EXPORT_METHOD(createView:(nonnull NSNumber *)reactTag
                  viewName:(NSString *)viewName
                  rootTag:(nonnull NSNumber *)rootTag
                  props:(NSDictionary *)props)
</code></pre><p>RCT_EXPORT_METHOD&#x5B8F;:&#x4F1A;&#x5728;JS&#x4E2D;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684;OC&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;JS&#x5C31;&#x80FD;&#x76F4;&#x63A5;&#x8C03;&#x7528;</p>
<p>&#x6CE8;&#x610F;&#x6BCF;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;UIView,&#x5C31;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;RCTShadowView&#xFF0C;&#x4E0E;UIView&#x4E00;&#x4E00;&#x5BF9;&#x5E94;</p>
<p>RCTShadowView:&#x4FDD;&#x5B58;&#x5BF9;&#x5E94;UIView&#x7684;&#x5E03;&#x5C40;&#x548C;&#x5B50;&#x63A7;&#x4EF6;,&#x7BA1;&#x7406;UIView&#x7684;&#x52A0;&#x8F7D;</p>
<p>5&#x3001;[RCTUIManager _layoutAndMount]</p>
<blockquote>
<p>&#x5E03;&#x5C40;RCTRootView&#x548C;&#x589E;&#x52A0;&#x5B50;&#x63A7;&#x4EF6;</p>
</blockquote>
<p>6&#x3001;[RCTUIManager setChildren:reactTags:] </p>
<blockquote>
<p>&#x7ED9;RCTRootView&#x5BF9;&#x5E94;&#x7684;RCTRootShadowView&#x8BBE;&#x7F6E;&#x5B50;&#x63A7;&#x4EF6;</p>
</blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x6B64;&#x65B9;&#x6CD5;&#x4E5F;&#x662F;JS&#x8C03;&#x7528;OC&#x65B9;&#x6CD5;</p>
<p>7&#x3001;[RCTRootShadowView insertReactSubview:view atIndex:index++] </p>
<blockquote>
<p>&#x904D;&#x5386;&#x5B50;&#x63A7;&#x4EF6;&#x6570;&#x7EC4;&#xFF0C;&#x7ED9;RCTRootShadowView&#x63D2;&#x5165;&#x6240;&#x6709;&#x5B50;&#x63A7;&#x4EF6;</p>
</blockquote>
<p>8&#x3001;[RCTShadowView processUpdatedProperties:parentProperties:] </p>
<blockquote>
<p>&#x5904;&#x7406;&#x4FDD;&#x5B58;&#x5728;RCTShadowView&#x4E2D;&#x5C5E;&#x6027;&#xFF0C;&#x5C31;&#x4F1A;&#x53BB;&#x5E03;&#x5C40;RCTShadowView&#x5BF9;&#x5E94;UIView&#x7684;&#x6240;&#x6709;&#x5B50;&#x63A7;&#x4EF6;</p>
</blockquote>
<p>9&#x3001;[RCTView didUpdateReactSubviews]</p>
<blockquote>
<p>&#x7ED9;&#x539F;&#x751F;View&#x6DFB;&#x52A0;&#x5B50;&#x63A7;&#x4EF6;</p>
</blockquote>
<p>10&#x3001;&#x5B8C;&#x6210;UI&#x6E32;&#x67D3;</p>
<p><img src="http://cc.cocimg.com/api/uploads/20170505/1493948976223744.png" alt="image"></p>
<h1 id="&#x4E03;&#x3001;rn&#x901A;&#x4FE1;&#x673A;&#x5236;"><a name="&#x4E03;&#x3001;rn&#x901A;&#x4FE1;&#x673A;&#x5236;" class="anchor-navigation-ex-anchor" href="#&#x4E03;&#x3001;rn&#x901A;&#x4FE1;&#x673A;&#x5236;"><i class="fa fa-link" aria-hidden="true"></i></a>8. &#x4E03;&#x3001;RN&#x901A;&#x4FE1;&#x673A;&#x5236;</h1>
<p>React Native&#x7528;iOS&#x81EA;&#x5E26;&#x7684;JavaScriptCore&#x4F5C;&#x4E3A;JS&#x7684;&#x89E3;&#x6790;&#x5F15;&#x64CE;&#xFF0C;&#x4F46;&#x5E76;&#x6CA1;&#x6709;&#x7528;&#x5230;JavaScriptCore&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x4E9B;&#x53EF;&#x4EE5;&#x8BA9;JS&#x4E0E;OC&#x4E92;&#x8C03;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x800C;&#x662F;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x5957;&#x673A;&#x5236;&#xFF0C;&#x8FD9;&#x5957;&#x673A;&#x5236;&#x53EF;&#x4EE5;&#x901A;&#x7528;&#x4E8E;&#x6240;&#x6709;JS&#x5F15;&#x64CE;&#x4E0A;&#xFF0C;&#x5728;&#x6CA1;&#x6709;JavaScriptCore&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;webview&#x4EE3;&#x66FF;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x9879;&#x76EE;&#x91CC;&#x5C31;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x7528;webview&#x4F5C;&#x4E3A;&#x89E3;&#x6790;&#x5F15;&#x64CE;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x7528;&#x4E8E;&#x517C;&#x5BB9;iOS7&#x4EE5;&#x4E0B;&#x6CA1;&#x6709;JavascriptCore&#x7684;&#x7248;&#x672C;</p>
<p>&#x901A;&#x4FE1;&#x8FC7;&#x7A0B;</p>
<blockquote>
<p>&#x6240;&#x8C13;&#x7684;&#x901A;&#x4FE1;&#x5176;&#x5B9E;&#x5C31;&#x662F;js&#x548C;oc&#x4E24;&#x8005;&#x5982;&#x4F55;&#x76F8;&#x4E92;&#x8C03;&#x7528;&#x4F20;&#x53C2;&#x7B49;</p>
</blockquote>
<ul>
<li>&#x7A0B;&#x5E8F;&#x4E00;&#x5F00;&#x59CB;native&#x4F1A;&#x8C03;&#x7528;js&#x7684;RCTDeviceEventEmitter.emit&#x65B9;&#x6CD5;</li>
<li>&#x5206;&#x522B;&#x53D1;&#x9001;&apos;appStateDidChange&apos; &#x548C;&apos;networkStatusDidChange&apos;&#x4E24;&#x4E2A;&#x4E8B;&#x4EF6;</li>
</ul>
<pre><code>iOS&#x7AEF;&#xFF1A;
if (![connectionType isEqualToString:self-&gt;_connectionType] ||
      ![effectiveConnectionType isEqualToString:self-&gt;_effectiveConnectionType] ||
      ![status isEqualToString:self-&gt;_statusDeprecated]) {
    self-&gt;_connectionType = connectionType;
    self-&gt;_effectiveConnectionType = effectiveConnectionType;
    self-&gt;_statusDeprecated = status;
    [self sendEventWithName:@&quot;networkStatusDidChange&quot; body:@{@&quot;connectionType&quot;: connectionType,
                                                             @&quot;effectiveConnectionType&quot;: effectiveConnectionType,
                                                             @&quot;network_info&quot;: status}];
  }

  if (![newState isEqualToString:_lastKnownState]) {
    _lastKnownState = newState;
    [self sendEventWithName:@&quot;appStateDidChange&quot;
                       body:@{@&quot;app_state&quot;: _lastKnownState}];
  }
  //&#x4EE5;&#x4E0A;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x90FD;&#x662F;RN&#x63D0;&#x4F9B;&#x7ED9;iOS&#x7684;&#x5728;RCTAppState.m&#x4E2D;
</code></pre><pre><code>RN&#x7AEF;&#xFF1A;
if (type === &apos;change&apos;) {
          this._eventHandlers[type].set(handler, this.addListener(&apos;appStateDidChange&apos;, function (appStateData) {
            handler(appStateData.app_state);
          }));
        } else if (type === &apos;memoryWarning&apos;) {
          this._eventHandlers[type].set(handler, this.addListener(&apos;memoryWarning&apos;, handler));
        }
</code></pre><ul>
<li>&#x63A5;&#x7740;&#x8C03;&#x7528;js&#x7684;AppRegistry.runApplication&#x65B9;&#x6CD5;&#x542F;&#x52A8;js&#x5E94;&#x7528;</li>
<li>&#x7136;&#x540E;js&#x5C42;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;native&#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x6CD5;&#x6765; RCTUIManager.createView&#x6765;&#x521B;&#x5EFA;&#x89C6;&#x56FE;&#x4E86;</li>
</ul>
<h2 id="2&#x3001;rn&#x7AEF;&#x53D1;&#x6D88;&#x606F;&#x5230;ios&#x7684;&#x8FC7;&#x7A0B;"><a name="2&#x3001;rn&#x7AEF;&#x53D1;&#x6D88;&#x606F;&#x5230;ios&#x7684;&#x8FC7;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#2&#x3001;rn&#x7AEF;&#x53D1;&#x6D88;&#x606F;&#x5230;ios&#x7684;&#x8FC7;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>8.1. 2&#x3001;RN&#x7AEF;&#x53D1;&#x6D88;&#x606F;&#x5230;iOS&#x7684;&#x8FC7;&#x7A0B;</h2>
<ul>
<li>&#x9996;&#x5148;&#x5728;iOS&#x91CC;&#x9762;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x7C7B;LoadPageManager</li>
<li>LoadPageManager&#x4F1A;&#x5B9E;&#x73B0;RCTBridgeModule&#x534F;&#x8BAE;</li>
<li>&#x5728;LoadPageManager&#x7D2F;&#x7684;&#x5B9E;&#x73B0;&#x4E2D;&#x6DFB;&#x52A0;&#x5B8F;&#x5B9A;&#x4E49;&#xFF1A;RCT_EXPORT_MODULE() </li>
<li>RCT_EXPORT_MODULE()&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x4F20;&#x5165;&#x53C2;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5728;iOS&#x4E2D;&#x5BFC;&#x51FA;&#x7684;&#x6A21;&#x5757;&#x540D;&#x5C31;&#x662F;&#x7C7B;&#x540D;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x63D2;&#x5165;&#x53C2;&#x6570;&#x4F5C;&#x4E3A;&#x81EA;&#x5B9A;&#x4E49;&#x6A21;&#x5757;&#x540D;</li>
</ul>
<pre><code>iOS&#x7AEF;&#x4EE3;&#x7801;
@implementation LoadPageManager
//&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x6765;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;,&#x4E0D;&#x6307;&#x5B9A;&#x5C31;&#x662F;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x540D;&#x5B57;(ExampleInterface)
RCT_EXPORT_MODULE()
@end
</code></pre><p>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x534F;&#x8BAE;&#x7684;&#x4EE3;&#x7406;&#x65B9;&#x6CD5;&#x4E86;&#xFF0C;&#x534F;&#x8BAE;&#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x9700;&#x8981;&#x5728;RCT_EXPORT_METHOD&#x8FD9;&#x4E2A;&#x5B8F;&#x91CC;&#x9762;&#xFF1B;&#x4E0B;&#x9762;&#x4EE5;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x8DF3;&#x8F6C;&#x7684;&#x65B9;&#x6CD5;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre><code>@implementation LoadPageManager
RCT_EXPORT_MODULE()

// RN&#x8DF3;&#x8F6C;Native //
// showCSTNativePage&#x548C;&#x524D;&#x7AEF;&#x4EA4;&#x4E92;&#x7684;&#x5177;&#x4F53;&#x65B9;&#x6CD5;&#x5B8F;&#x5B9A;&#x4E49;  //
// &#x5728;&#x65B9;&#x6CD5;&#x5B8F;&#x5B9A;&#x4E49;&#x91CC;&#x9762;&#x7EA6;&#x5B9A;&#x548C;&#x524D;&#x7AEF;&#x4EA4;&#x4E92;&#x7684;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x683C;&#x5F0F; //
RCT_EXPORT_METHOD(showCSTNativePage:(NSDictionary*)commonParames
                  disappearCallBack:(RCTResponseSenderBlock) disappearCallBack)
{
    NSLog(@&quot;start load&quot;);
    //&#x63A5;&#x6536;&#x89E3;&#x6790;&#x524D;&#x7AEF;&#x4F20;&#x53C2;
    NSString* pagePath = [commonParames objectForKey:@&quot;pagePath&quot;];
    NSDictionary* aParams = [commonParames objectForKey:@&quot;params&quot;];
    NSString* aPostMessageEvent = [commonParames objectForKey:@&quot;postMessageEvent&quot;];
    NSInteger isCloseParent = [(NSNumber*)[commonParames objectForKey:@&quot;isDestoryBeforePage&quot;] intValue];
    NSString* aAppearEvent = [commonParames objectForKey:@&quot;appearEvent&quot;];

    NSMutableDictionary* aTmpDic = [NSMutableDictionary dictionaryWithDictionary:commonParames];
    // &#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x4E0D;&#x8981;&#x5220;&#x9664; //
    NSMutableDictionary* aDic;
    if (aParams){
        aDic = [NSMutableDictionary dictionaryWithDictionary:aParams];
    }

    if (aPostMessageEvent){
        [aDic setValue:aPostMessageEvent forKey:PostEvent];
    }

    if (aAppearEvent){
        [aDic setValue:aAppearEvent forKey:AppearEvent];
    }
    // &#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x4E0D;&#x8981;&#x5220;&#x9664; //
    //&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x9875;&#x9762;&#x8FD4;&#x56DE;&#x65F6;&#x6267;&#x884C;
    if (disappearCallBack){
        [aTmpDic setValue:disappearCallBack forKey:DisappearCallBack];
    }


    if (isCloseParent){
        [self RNBackAction];
    }
    // &#x8F6C;&#x4E00;&#x4E0B;&#x5B50;&#x4E3A;&#x4E86;&#x548C;&#x4E4B;&#x524D;Hybrid &#x4E00;&#x81F4; //
    pagePath = [pagePath stringByReplacingOccurrencesOfString:@&quot;_&quot; withString:@&quot;/&quot;];
    aDic = [self adpatToHybridParmers:[NSMutableDictionary dictionaryWithDictionary:aTmpDic]]; // &#x540E;&#x671F;&#x91CD;&#x505A;&#x8003;&#x8651;&#x53BB;&#x6389; //
    // &#x8F6C;&#x4E00;&#x4E0B;&#x5B50;&#x4E3A;&#x4E86;&#x548C;&#x4E4B;&#x524D;Hybrid &#x4E00;&#x81F4; //

    dispatch_async(dispatch_get_main_queue(), ^{
       [[CHRDispatcher sharedDispatcher] invokeForPath:pagePath andParams: aDic];
    });
}
</code></pre><p>RCTBatchedBridge</p>
<blockquote>
<p>&#x4E3A;&#x4E86;&#x6865;&#x63A5;js&#x8DDF;native&#xFF0C;native&#x5C42;&#x5F15;&#x5165;&#x4E86;RCTBridge&#x8FD9;&#x4E2A;&#x7C7B;&#x8D1F;&#x8D23;&#x53CC;&#x65B9;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x4E0D;&#x8FC7;&#x771F;&#x6B63;&#x8D77;&#x4F5C;&#x7528;&#x7684;&#x662F;RCTBatchedBridge&#x8FD9;&#x4E2A;&#x7C7B;&#xFF0C;&#x8FD9;&#x4E2A;&#x7C7B;&#x5E94;&#x8BE5;&#x7B97;&#x662F;&#x6BD4;&#x8F83;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x4E2A;&#x7C7B;&#x4E86;</p>
</blockquote>
<p>&#x901A;&#x4FE1;&#x5728;&#x524D;&#x7AEF;&#x7684;&#x5B9E;&#x73B0;&#xFF1A;  </p>
<blockquote>
<p>RN&#x5C42;Libraries/BatchedBridge&#x5305;&#x4E0B;&#x9762;&#x6709;3&#x4E2A;JS&#x6587;&#x4EF6;&#xFF1A;BatchedBridge.js&#x3001;MessageQueue.js&#x3001;NativeModules.js&#xFF0C;&#x5B83;&#x4EEC;&#x5C01;&#x88C5;&#x4E86;&#x901A;&#x4FE1;&#x6865;&#x5728;RN&#x5C42;&#x7684;&#x5B9E;&#x73B0;&#x3002; </p>
</blockquote>
<p><img src="https://note.youdao.com/yws/public/resource/888aadc0af7f68a91144fa1405fc7e7d/xmlnote/13B698EF6E4B4512BC5D43EF56B94654/7379" alt="image"></p>
<h5 id="batchedbridgejs"><a name="batchedbridgejs" class="anchor-navigation-ex-anchor" href="#batchedbridgejs"><i class="fa fa-link" aria-hidden="true"></i></a>BatchedBridge.js</h5>
<pre><code>&apos;use strict&apos;;

const MessageQueue = require(&apos;MessageQueue&apos;);

// MessageQueue can install a global handler to catch all exceptions where JS users can register their own behavior
// This handler makes all exceptions to be handled inside MessageQueue rather than by the VM at its origin
// This makes stacktraces to be placed at MessageQueue rather than at where they were launched
// The parameter __fbUninstallRNGlobalErrorHandler is passed to MessageQueue to prevent the handler from being installed
//
// __fbUninstallRNGlobalErrorHandler is conditionally set by the Inspector while the VM is paused for initialization
// If the Inspector isn&apos;t present it defaults to undefined and the global error handler is installed
// The Inspector can still call MessageQueue#uninstallGlobalErrorHandler to uninstalled on attach

const BatchedBridge = new MessageQueue(
  // $FlowFixMe
  typeof __fbUninstallRNGlobalErrorHandler !== &apos;undefined&apos; &amp;&amp;
    __fbUninstallRNGlobalErrorHandler === true, // eslint-disable-line no-undef
);

// Wire up the batched bridge on the global object so that we can call into it.
// Ideally, this would be the inverse relationship. I.e. the native environment
// provides this global directly with its script embedded. Then this module
// would export it. A possible fix would be to trim the dependencies in
// MessageQueue to its minimal features and embed that in the native runtime.

Object.defineProperty(global, &apos;__fbBatchedBridge&apos;, {
  configurable: true,
  value: BatchedBridge,
});

module.exports = BatchedBridge;
</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5728;BatchedBridge&#x4E2D;&#x521B;&#x5EFA;&#x4E86;MessageQueue&#x5BF9;&#x8C61;</p>
<h5 id="messagequeuejs"><a name="messagequeuejs" class="anchor-navigation-ex-anchor" href="#messagequeuejs"><i class="fa fa-link" aria-hidden="true"></i></a>MessageQueue.js</h5>
<p>MessageQueue&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</p>
<pre><code>class MessageQueue {
  //Js&#x6A21;&#x5757;&#x6CE8;&#x518C;&#x6DFB;&#x52A0;&#x5230;_lazyCallableModules
  _lazyCallableModules: {[key: string]: (void) =&gt; Object};
  //&#x961F;&#x5217;&#xFF0C;&#x5206;&#x522B;&#x5B58;&#x653E;&#x8981;&#x8C03;&#x7528;&#x7684;&#x6A21;&#x5757;&#x6570;&#x7EC4;&#x3001;&#x65B9;&#x6CD5;&#x6570;&#x7EC4;&#x3001;&#x53C2;&#x6570;&#x6570;&#x7EC4;&#x4E0E;&#x6570;&#x7EC4;&#x5927;&#x5C0F;
  _queue: [number[], number[], any[], number];
  //&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x6570;&#x7EC4;&#xFF0C;&#x4E0E;_quueue&#x4E00;&#x4E00;&#x5BF9;&#x5E94;&#xFF0C;&#x6BCF;&#x4E2A;_queue&#x4E2D;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5728;&#x8FD9;&#x4E2A;&#x6570;&#x7EC4;&#x5BF9;&#x5E94;&#x7684;&#x4E0B;&#x6807;&#x4E0A;&#x3002;
  _successCallbacks: (?Function)[];
  _failureCallbacks: (?Function)[];
  //&#x8C03;&#x7528;&#x51FD;&#x6570;ID&#xFF0C;&#x81EA;&#x52A8;&#x589E;&#x52A0;&#x3002;
  _callID: number;
  _inCall: number;
  _lastFlush: number;
  _eventLoopStartTime: number;

  _debugInfo: {[number]: [number, number
  //Module Table&#xFF0C;&#x7528;&#x4E8E;Native Module
  _remoteModuleTable: {[number]: string};
  //Method Table&#xFF0C;&#x7528;&#x4E8E;Native Module
  _remoteMethodTable: {[number]: string[]};

  __spy: ?(data: SpyData) =&gt; void;

  __guard: (() =&gt; void) =&gt; void;

  constructor(shouldUninstallGlobalErrorHandler: boolean = false) {
    this._lazyCallableModules = {};
    this._queue = [[], [], [], 0];
    this._successCallbacks = [];
    this._failureCallbacks = [];
    this._callID = 0;
    this._lastFlush = 0;
    this._eventLoopStartTime = new Date().getTime();
    if (shouldUninstallGlobalErrorHandler) {
      this.uninstallGlobalErrorHandler();
    } else {
      this.installGlobalErrorHandler();
    }

    if (__DEV__) {
      this._debugInfo = {};
      this._remoteModuleTable = {};
      this._remoteMethodTable = {};
    }

    //&#x7ED1;&#x5B9A;&#x51FD;&#x6570;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x4F7F;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4E0D;&#x8BBA;&#x600E;&#x4E48;&#x8C03;&#x7528;&#x90FD;&#x6709;&#x540C;&#x6837;&#x7684;this&#x503C;
    (this: any).callFunctionReturnFlushedQueue = this.callFunctionReturnFlushedQueue.bind(
      this,
    );
    (this: any).callFunctionReturnResultAndFlushedQueue = this.callFunctionReturnResultAndFlushedQueue.bind(
      this,
    );
    (this: any).flushedQueue = this.flushedQueue.bind(this);
    (this: any).invokeCallbackAndReturnFlushedQueue = this.invokeCallbackAndReturnFlushedQueue.bind(
      this,
    );
  }
}
</code></pre><h5 id="nativemodulesjs"><a name="nativemodulesjs" class="anchor-navigation-ex-anchor" href="#nativemodulesjs"><i class="fa fa-link" aria-hidden="true"></i></a>NativeModules.js</h5>
<blockquote>
<p>NativeModules&#x63CF;&#x8FF0;&#x4E86;Module&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x7528;&#x4E8E;&#x89E3;&#x6790;&#x5E76;&#x751F;&#x6210;Module&#x3002;</p>
</blockquote>
<p>Module&#x7684;&#x7ED3;&#x6784;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#x6240;&#x793A;</p>
<pre><code>type ModuleConfig = [
  string, /* name */
  ?Object, /* constants */
  Array&lt;string&gt;, /* functions */
  Array&lt;number&gt;, /* promise method IDs */
  Array&lt;number&gt;, /* sync method IDs */
];
</code></pre><blockquote>
<p>RN&#x901A;&#x8FC7;NativeModules&#x6765;&#x5B9E;&#x73B0;&#x4F20;&#x8F93;&#x548C;&#x63A5;&#x53D7;&#x6D88;&#x606F;
&#x9996;&#x5148;&#x524D;&#x7AEF;&#x9875;&#x9762;&#x8981;&#x5F15;&#x5165;NativeModules&#x6A21;&#x5757;</p>
</blockquote>
<pre><code>import { NativeModules, Platform } from &quot;react-native&quot;;
</code></pre><p>&#x7136;&#x540E;&#x5728;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#x83B7;&#x53D6;&#x5BFC;&#x51FA;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x7528;&#x6A21;&#x5757;&#x8C03;&#x7528;iOS&#x7684;&#x5BFC;&#x51FA;&#x7684;&#x51FD;&#x6570;&#x540D;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;</p>
<pre><code>let pageManager = NativeModules.LoadPageManager;
function nativeBridge(type, params, disappearCallBack) {
    pageManager[type](params, disappearCallBack);
}
//RN&#x8DF3;&#x8F6C;native&#x9875;&#x9762;
function jumpNativePage(
    { pagePath, isDestoryBeforePage = 0, jumpParameter, appearEvent, postMessageEvent, ...other },
    disappearCallBack = (error, nativeData) =&gt; {} //&#x56DE;&#x8C03;&#x51FD;&#x6570;
) {
    const error = checker(
        arguments,
        [
            {
                pagePath: &quot;s|r&quot;,
                isDestoryBeforePage: &quot;b&quot;,
                jumpParameter: &quot;o&quot;,
                appearEvent: &quot;s&quot;,
                postMessageEvent: &quot;s&quot;,
                ...other
            },
            &quot;f&quot;
        ],
        &quot;jumpNativePage&quot;
    );
    // &#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x62A5;&#x9519;&#x4E0D;&#x8C03;&#x8D77; Native &#x7684; API
    if (error === &quot;error&quot;) {
        return error;
    }
    let param = {
        pagePath,
        jumpParameter,
        appearEvent,
        postMessageEvent, //&#x4E8B;&#x4EF6;&#x540D;&#x79F0;
        isDestoryBeforePage, //0:&#x4E0D;&#x5173;&#x95ED;&#xFF0C;1&#x5173;&#x95ED;
        ...other
    };
    nativeBridge(&quot;showCSTNativePage&quot;, param, disappearCallBack);
}
//showCSTNativePage&#x7EA6;&#x5B9A;&#x6B64;&#x65B9;&#x6CD5;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x9875;&#x9762;&#x8DF3;&#x8F6C;&#x9700;&#x8981;&#x7684;&#x6240;&#x6709;&#x5FC5;&#x586B;&#x53C2;&#x6570;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;json&#x5BF9;&#x8C61;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x9875;&#x9762;&#x8FD4;&#x56DE;&#x65F6;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x662F;Function&#x7C7B;&#x578B;
</code></pre><p>&#x6574;&#x4E2A;&#x8C03;&#x7528;&#x8FC7;&#x7A0B;
<img src="http://upload-images.jianshu.io/upload_images/458529-55bd1d087f5b19af.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<h2 id="3&#x3001;native&#x7ED9;rn&#x4E3B;&#x52A8;&#x53D1;&#x9001;&#x4E8B;&#x4EF6;"><a name="3&#x3001;native&#x7ED9;rn&#x4E3B;&#x52A8;&#x53D1;&#x9001;&#x4E8B;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#3&#x3001;native&#x7ED9;rn&#x4E3B;&#x52A8;&#x53D1;&#x9001;&#x4E8B;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>8.2. 3&#x3001;native&#x7ED9;RN&#x4E3B;&#x52A8;&#x53D1;&#x9001;&#x4E8B;&#x4EF6;</h2>
<p><a href="https://reactnative.cn/docs/0.51/native-modules-ios.html#content" target="_blank">&#x5B98;&#x7F51;</a>&#x89E3;&#x91CA;&#xFF1A;<br>&#x6700;&#x597D;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x7EE7;&#x627F;RCTEventEmitter&#xFF0C;&#x5B9E;&#x73B0;suppportEvents&#x65B9;&#x6CD5;&#x5E76;&#x8C03;&#x7528;self sendEventWithName:&#x3002;</p>
<p>JavaScript&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x4F60;&#x7684;&#x6A21;&#x5757;&#x7684;NativeEventEmitter&#x5B9E;&#x4F8B;&#x6765;&#x8BA2;&#x9605;&#x8FD9;&#x4E9B;&#x4E8B;&#x4EF6;</p>
<p>iOS&#x7AEF;&#x5BFC;&#x51FA;&#x65B9;&#x6CD5;</p>
<pre><code>@implementation NativeNotification
RCT_EXPORT_MODULE();

- (NSArray&lt;NSString*&gt;*) supportedEvents
{
    return @[AppearEvent];
}
</code></pre><p>RN&#x7AEF;&#x8C03;&#x7528;</p>
<pre><code>import { NativeEventEmitter, NativeModules } from &quot;react-native&quot;;
//NativeNotification&#x662F;native&#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#x7684;&#x65B9;&#x6CD5;&#x5B9A;&#x4E49;&#x5B8F;
//addListener&#x662F;native&#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#x7684;&#x6A21;&#x5757;&#x5B9A;&#x4E49;&#x5B8F;
const { NativeNotification } = NativeModules;
const eventManagerEmitter = new NativeEventEmitter(NativeNotification);

//&#x5728;&#x7EC4;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;
  componentWillMount() {
    this.listener = eventManagerEmitter.addListener(&apos;viewAppear&apos;, (nativeData)=&gt;{
    //nativeData native&#x7AEF;&#x8FD4;&#x56DE;&#x6570;&#x636E;
    console.log(JSON.stringify(nativeData))
    });  //&#x5BF9;&#x5E94;&#x4E86;&#x539F;&#x751F;&#x7AEF;&#x7684;&#x540D;&#x5B57;
  }
  //&#x8BB0;&#x5F97;remove
  componentWillUnmount() {
    this.listener &amp;&amp; this.listener.remove();
</code></pre><p>&#x603B;&#x7ED3;&#xFF1A;<br>&#x5176;&#x5B9E;&#x5C31;&#x662F;iOS&#x7AEF;&#x8BBE;&#x7F6E;&#x4E86;&#x6865;&#x63A5;&#x5185;&#x5BB9;&#xFF0C;&#x5C06;&#x6536;&#x5230;&#x7684;&#x901A;&#x77E5;&#x5185;&#x5BB9;&#x4F20;&#x9012;&#x7ED9;RN&#xFF0C;&#x7136;&#x540E;RN&#x76D1;&#x542C;&#x6709;&#x6CA1;&#x6709;&#x5BF9;&#x5E94;Name&#x7684;&#x4E8B;&#x4EF6;&#x540D;&#xFF0C;&#x6709;&#x7684;&#x8BDD;&#x5C31;&#x5904;&#x7406; </p>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; gongchenghui 2018 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x6587;&#x4EF6;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2018-11-07 16:58:04
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="router.html" class="navigation navigation-prev " aria-label="Previous page: RN路由">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Mnager.html" class="navigation navigation-next " aria-label="Next page: RN交互管理">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"RN渲染通信机制","level":"1.5.3","depth":2,"next":{"title":"RN交互管理","level":"1.5.4","depth":2,"path":"docs/RNInduction/Mnager.md","ref":"docs/RNInduction/Mnager.md","articles":[]},"previous":{"title":"RN路由","level":"1.5.2","depth":2,"path":"docs/RNInduction/router.md","ref":"docs/RNInduction/router.md","articles":[]},"dir":"ltr"},"config":{"_comment":{"plugins":{"toggle-chapters":"目录折叠","anchor-navigation-ex":"添加Toc到侧边悬浮导航以及回到顶部按钮","splitter":"使侧边栏的宽度可以自由调节","theme-default":"将 showLevel 设为 true， 就可以显示标题前面的数字索引，默认不显示","mermaid":"支持渲染Mermaid图表 "}},"plugins":["toggle-chapters","favicon","anchor-navigation-ex","tbfed-pagefooter"],"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy gongchenghui 2018","modify_label":"文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"favicon":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"showLevel":false,"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}},"toggle-chapters":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"docs/RNInduction/protocol.md","mtime":"2018-11-07T08:58:04.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-11-07T10:07:39.637Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-toggle-chapters/toggle.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

